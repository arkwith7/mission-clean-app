# ğŸ—„ï¸ Mission Clean ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ì´ ë¬¸ì„œëŠ” 'ì—ì–´ì»¨ ì²­ì†Œ ì¤‘ê°œ í”Œë«í¼'ì˜ ì„œë¹„ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ê° í…Œì´ë¸”ì€ íŠ¹ì • ì—­í• (ê³ ê°, ê¸°ì‚¬, ê´€ë¦¬ì)ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸš€ êµ¬ì¶• ìš°ì„ ìˆœìœ„

ì•ˆì •ì ì´ê³  ë¹ ë¥¸ ì„œë¹„ìŠ¤ ëŸ°ì¹­ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì¶• ìš°ì„ ìˆœìœ„ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. ê³ ê°ì´ ì„œë¹„ìŠ¤ë¥¼ ê²½í—˜í•˜ëŠ” í•µì‹¬ í”Œë¡œìš°ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ê°œë°œí•©ë‹ˆë‹¤.

### **1ìˆœìœ„: ê³ ê° í•µì‹¬ ì„œë¹„ìŠ¤ (MVP Core)**
- **ëª©í‘œ**: ê³ ê°ì´ íšŒì›ê°€ì…ë¶€í„° ì„œë¹„ìŠ¤ ì˜ˆì•½, ê²°ì œê¹Œì§€ ì™„ë£Œí•  ìˆ˜ ìˆëŠ” í•µì‹¬ ì‚¬ì´í´ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- **ê´€ë ¨ í…Œì´ë¸”**: `users`, `customers`, `services`, `bookings`, `booking_services`, `payments`
- **ì£¼ìš” ê¸°ëŠ¥**:
    - ì´ë©”ì¼/ì†Œì…œ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
    - ì„œë¹„ìŠ¤ ëª©ë¡ ì¡°íšŒ ë° ì„ íƒ
    - ì›í•˜ëŠ” ë‚ ì§œ/ì‹œê°„ì— ì„œë¹„ìŠ¤ ì˜ˆì•½
    - ì˜ˆì•½ ì •ë³´ ê¸°ë°˜ ê²°ì œ ì§„í–‰
    - ë‚´ ì˜ˆì•½ ë‚´ì—­ í™•ì¸

### **2ìˆœìœ„: ì„œë¹„ìŠ¤ ê¸°ì‚¬ í•µì‹¬ ê¸°ëŠ¥**
- **ëª©í‘œ**: ë°°ì •ëœ ê¸°ì‚¬ê°€ ì‘ì—…ì„ í™•ì¸í•˜ê³  ìˆ˜í–‰í•˜ë©°, ì™„ë£Œ ë³´ê³ ê¹Œì§€ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- **ê´€ë ¨ í…Œì´ë¸”**: `technicians`, `service_reports` + (1ìˆœìœ„ í…Œì´ë¸”)
- **ì£¼ìš” ê¸°ëŠ¥**:
    - ê¸°ì‚¬ í”„ë¡œí•„ ê´€ë¦¬
    - ì‹ ê·œ ì˜ˆì•½ í™•ì¸ ë° ìˆ˜ë½
    - ì‘ì—… ìƒíƒœ ë³€ê²½ (ì˜ˆ: ì´ë™ì¤‘, ì„œë¹„ìŠ¤ì¤‘, ì™„ë£Œ)
    - ì„œë¹„ìŠ¤ ì™„ë£Œ í›„ ì‘ì—… ë³´ê³ ì„œ ì‘ì„± ë° ì œì¶œ

### **3ìˆœìœ„: í”Œë«í¼ ê³ ë„í™” ë° ìš´ì˜**
- **ëª©í‘œ**: ì„œë¹„ìŠ¤ì˜ ì‹ ë¢°ë„ë¥¼ ë†’ì´ê³  ìš´ì˜ì„ íš¨ìœ¨í™”í•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- **ê´€ë ¨ í…Œì´ë¸”**: `reviews`, `settlements`, `notifications` + (1, 2ìˆœìœ„ í…Œì´ë¸”)
- **ì£¼ìš” ê¸°ëŠ¥**:
    - ê³ ê°ì˜ ì„œë¹„ìŠ¤ ë¦¬ë·° ì‘ì„± ë° ì¡°íšŒ
    - ê´€ë¦¬ìì˜ ê¸°ì‚¬ ì •ì‚° ê´€ë¦¬
    - ì˜ˆì•½ ìƒíƒœ ë³€ê²½ ë“± ì£¼ìš” ì´ë²¤íŠ¸ì— ëŒ€í•œ ì•Œë¦¼ ë°œì†¡
    - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë° íšŒì›/ì˜ˆì•½ ê´€ë¦¬ ê¸°ëŠ¥

---

## 1. ì‚¬ìš©ì ë° ê¶Œí•œ ê´€ë¦¬
**[ì‹œë‚˜ë¦¬ì˜¤ ì—°ê´€ì„±]**
- **ê³ ê°**: íšŒì›ê°€ì…/ë¡œê·¸ì¸, ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.
- **ì„œë¹„ìŠ¤ ê¸°ì‚¬**: ê´€ë¦¬ìì˜ ìŠ¹ì¸ì„ í†µí•´ ê°€ì…í•˜ê³ , ìì‹ ì˜ í”„ë¡œí•„ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- **ê´€ë¦¬ì**: ì‹œìŠ¤í…œì˜ ëª¨ë“  ì‚¬ìš©ìë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

### `users` (ì‚¬ìš©ì)
- ëª¨ë“  ì‹œìŠ¤í…œ ì‚¬ìš©ì(ê³ ê°, ê¸°ì‚¬, ê´€ë¦¬ì)ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
- ì†Œì…œ ë¡œê·¸ì¸ì„ ê³ ë ¤í•˜ì—¬ `provider`ì™€ `social_id` ì»¬ëŸ¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `user_id` | `INT` | PK, AUTO_INCREMENT | ì‚¬ìš©ì ì‹ë³„ì |
| `email` | `VARCHAR(100)` | UNIQUE, NOT NULL | ì´ë©”ì¼ (ë¡œê·¸ì¸ ID) |
| `password_hash` | `VARCHAR(255)` | | ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ (ì´ë©”ì¼ ê°€ì… ì‹œ) |
| `name` | `VARCHAR(50)` | NOT NULL | ì´ë¦„ |
| `phone` | `VARCHAR(20)` | UNIQUE, NOT NULL | ì—°ë½ì²˜ |
| `role` | `ENUM('customer', 'technician', 'admin')` | NOT NULL | ì‚¬ìš©ì ì—­í•  |
| `status` | `ENUM('pending', 'active', 'inactive', 'suspended')` | DEFAULT 'pending' | ê³„ì • ìƒíƒœ (ê¸°ì‚¬ ìŠ¹ì¸ ëŒ€ê¸° ë“±) |
| `provider` | `ENUM('local', 'kakao', 'naver')` | DEFAULT 'local' | ê°€ì… ê²½ë¡œ (ì†Œì…œ ë¡œê·¸ì¸) |
| `social_id` | `VARCHAR(255)` | | ì†Œì…œ ë¡œê·¸ì¸ ID |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |
| `last_login` | `TIMESTAMP` | | ë§ˆì§€ë§‰ ë¡œê·¸ì¸ |

### `customers` (ê³ ê°)
- ê³ ê°ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `customer_id` | `INT` | PK, AUTO_INCREMENT | ê³ ê° ì‹ë³„ì |
| `user_id` | `INT` | NOT NULL, FK -> `users`.`user_id` | ì‚¬ìš©ì ì°¸ì¡° |
| `address` | `TEXT` | | ì£¼ì†Œ |
| `marketing_consent` | `BOOLEAN` | DEFAULT FALSE | ë§ˆì¼€íŒ… ë™ì˜ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

### `technicians` (ì„œë¹„ìŠ¤ ê¸°ì‚¬)
- ì„œë¹„ìŠ¤ ê¸°ì‚¬ì˜ í”„ë¡œí•„, ì „ë¬¸ ë¶„ì•¼ ë“± ìƒì„¸ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `technician_id` | `INT` | PK, AUTO_INCREMENT | ê¸°ì‚¬ ì‹ë³„ì |
| `user_id` | `INT` | NOT NULL, FK -> `users`.`user_id` | ì‚¬ìš©ì ì°¸ì¡° |
| `profile_image_url` | `VARCHAR(255)` | | í”„ë¡œí•„ ì‚¬ì§„ URL |
| `introduction` | `TEXT` | | ìê¸°ì†Œê°œ |
| `expertise` | `JSON` | | ì „ë¬¸ ë¶„ì•¼ (e.g., `["ë²½ê±¸ì´", "ìŠ¤íƒ ë“œ"]`) |
| `service_area` | `JSON` | | ì„œë¹„ìŠ¤ ê°€ëŠ¥ ì§€ì—­ (e.g., `["ì„œìš¸ì‹œ ê°•ë‚¨êµ¬", "ê²½ê¸°ë„ ì„±ë‚¨ì‹œ"]`) |
| `career_years` | `INT` | | ê²½ë ¥ (ë…„ì°¨) |
| `rating_average` | `DECIMAL(3, 2)` | DEFAULT 0.00 | í‰ê·  ë³„ì  |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

---

## 2. ì—ì–´ì»¨ ì œí’ˆ ê´€ë¦¬

### ac_brands (ì—ì–´ì»¨ ë¸Œëœë“œ)
| ì»¬ëŸ¼ëª…        | íƒ€ì…            | ì œì•½ì¡°ê±´                 | ì„¤ëª…               |
|---------------|-----------------|--------------------------|--------------------|
| brand_id      | INT             | PK, AUTO_INCREMENT       | ë¸Œëœë“œ ì‹ë³„ì      |
| brand_name    | VARCHAR(50)     | NOT NULL                 | ë¸Œëœë“œëª…           |
| brand_name_en | VARCHAR(50)     |                          | ë¸Œëœë“œëª…(ì˜ë¬¸)     |
| logo_url      | VARCHAR(255)    |                          | ë¡œê³  URL           |
| website_url   | VARCHAR(255)    |                          | ì›¹ì‚¬ì´íŠ¸ URL       |
| support_phone | VARCHAR(20)     |                          | ê³ ê°ì§€ì› ì—°ë½ì²˜    |
| is_active     | BOOLEAN         | DEFAULT TRUE             | í™œì„± ìƒíƒœ         |
| created_at    | TIMESTAMP       | DEFAULT CURRENT_TIMESTAMP| ìƒì„±ì¼ì‹œ          |

### ac_models (ì—ì–´ì»¨ ëª¨ë¸)
| ì»¬ëŸ¼ëª…            | íƒ€ì…                                   | ì œì•½ì¡°ê±´                                         | ì„¤ëª…                    |
|-------------------|----------------------------------------|--------------------------------------------------|-------------------------|
| model_id          | INT                                    | PK, AUTO_INCREMENT                               | ëª¨ë¸ ì‹ë³„ì             |
| brand_id          | INT                                    | NOT NULL, FK -> ac_brands.brand_id               | ë¸Œëœë“œ ì°¸ì¡°             |
| model_name        | VARCHAR(100)                           | NOT NULL                                         | ëª¨ë¸ëª…                  |
| model_code        | VARCHAR(50)                            |                                                  | ëª¨ë¸ ì½”ë“œ               |
| type              | ENUM('wall','stand','ceiling','window','portable')| NOT NULL                               | ì—ì–´ì»¨ í˜•íƒœ             |
| cooling_capacity  | DECIMAL(5,2)                           |                                                  | ëƒ‰ë°© ìš©ëŸ‰ (BTU/h)       |
| energy_rating     | ENUM('1','2','3','4','5')             |                                                  | ì—ë„ˆì§€ ë“±ê¸‰             |
| refrigerant_type  | VARCHAR(20)                            |                                                  | ëƒ‰ë§¤ ì¢…ë¥˜               |
| filter_type       | VARCHAR(100)                           |                                                  | í•„í„° ì¢…ë¥˜               |
| inverter_type     | ENUM('inverter','fixed')              | DEFAULT 'inverter'                              | ì¸ë²„í„° íƒ€ì…             |
| release_year      | YEAR                                   |                                                  | ì¶œì‹œ ì—°ë„               |
| manual_url        | VARCHAR(255)                           |                                                  | ë§¤ë‰´ì–¼ URL              |
| image_url         | VARCHAR(255)                           |                                                  | ì´ë¯¸ì§€ URL              |
| cleaning_notes    | TEXT                                   |                                                  | ì²­ì†Œ ì£¼ì˜ì‚¬í•­           |
| is_active         | BOOLEAN                                | DEFAULT TRUE                                     | í™œì„± ìƒíƒœ              |
| created_at        | TIMESTAMP                              | DEFAULT CURRENT_TIMESTAMP                        | ìƒì„±ì¼ì‹œ               |

### customer_aircons (ê³ ê° ì—ì–´ì»¨ ì •ë³´)
| ì»¬ëŸ¼ëª…              | íƒ€ì…                           | ì œì•½ì¡°ê±´                                    | ì„¤ëª…              |
|---------------------|--------------------------------|---------------------------------------------|-------------------|
| aircon_id           | INT                            | PK, AUTO_INCREMENT                          | ê³ ê° ì—ì–´ì»¨ ì‹ë³„ì|
| customer_id         | INT                            | NOT NULL, FK -> customers.customer_id       | ê³ ê° ì°¸ì¡°         |
| model_id            | INT                            | FK -> ac_models.model_id                    | ëª¨ë¸ ì°¸ì¡°         |
| installation_date   | DATE                           |                                             | ì„¤ì¹˜ ë‚ ì§œ         |
| room_location       | VARCHAR(50)                    |                                             | ì„¤ì¹˜ ìœ„ì¹˜         |
| usage_frequency     | ENUM('daily','weekly','seasonal')|                                          | ì‚¬ìš© ë¹ˆë„         |
| last_self_cleaning  | DATE                           |                                             | ë§ˆì§€ë§‰ ìê°€ ì²­ì†Œ  |
| notes               | TEXT                           |                                             | ë¹„ê³               |
| is_active           | BOOLEAN                        | DEFAULT TRUE                                | í™œì„± ìƒíƒœ         |
| created_at          | TIMESTAMP                      | DEFAULT CURRENT_TIMESTAMP                   | ìƒì„±ì¼ì‹œ         |

---
## 3. ì„œë¹„ìŠ¤ ë° ì˜ˆì•½ ê´€ë¦¬
**[ì‹œë‚˜ë¦¬ì˜¤ ì—°ê´€ì„±]**
- **ê³ ê°**: ì„œë¹„ìŠ¤ ì¢…ë¥˜ë¥¼ ë³´ê³  ì„ íƒí•˜ë©°, ì›í•˜ëŠ” ë‚ ì§œì™€ ì£¼ì†Œë¡œ ì˜ˆì•½ì„ ì‹ ì²­í•©ë‹ˆë‹¤. ìì‹ ì˜ ì˜ˆì•½ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê³  ë³€ê²½/ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì„œë¹„ìŠ¤ ê¸°ì‚¬**: ë°°ì •ëœ ì˜ˆì•½ì„ í™•ì¸í•˜ê³ , ê³ ê° ì •ë³´ì™€ ìš”ì²­ì‚¬í•­ì„ íŒŒì•…í•©ë‹ˆë‹¤.
- **ê´€ë¦¬ì**: ëª¨ë“  ì˜ˆì•½ í˜„í™©ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , í•„ìš”ì‹œ ìˆ˜ë™ìœ¼ë¡œ ì˜ˆì•½ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### `services` (ì„œë¹„ìŠ¤)
- ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ì¢…ë¥˜ì™€ ê°€ê²© ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `service_id` | `INT` | PK, AUTO_INCREMENT | ì„œë¹„ìŠ¤ ì‹ë³„ì |
| `service_name` | `VARCHAR(100)` | NOT NULL | ì„œë¹„ìŠ¤ëª… (e.g., "ë²½ê±¸ì´ ì—ì–´ì»¨ ê¸°ë³¸ ì„¸ì²™") |
| `description` | `TEXT` | | ìƒì„¸ ì„¤ëª… |
| `price` | `DECIMAL(10, 2)` | NOT NULL | ê¸°ë³¸ ê°€ê²© |
| `duration_minutes` | `INT` | | ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„) |
| `is_active` | `BOOLEAN` | DEFAULT TRUE | í™œì„± ìƒíƒœ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

### `bookings` (ì˜ˆì•½)
- ê³ ê°ì˜ ì„œë¹„ìŠ¤ ì˜ˆì•½ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `booking_id` | `INT` | PK, AUTO_INCREMENT | ì˜ˆì•½ ì‹ë³„ì |
| `customer_id` | `INT` | NOT NULL, FK -> `customers`.`customer_id` | ê³ ê° ì°¸ì¡° |
| `technician_id` | `INT` | FK -> `technicians`.`technician_id` | ë°°ì •ëœ ê¸°ì‚¬ ì°¸ì¡° |
| `service_datetime` | `TIMESTAMP` | NOT NULL | ì„œë¹„ìŠ¤ í¬ë§/ì˜ˆì • ì¼ì‹œ |
| `status` | `ENUM('pending', 'confirmed', 'technician_assigned', 'on_the_way', 'in_progress', 'completed', 'cancelled')` | DEFAULT 'pending' | ì˜ˆì•½ ìƒíƒœ |
| `address` | `TEXT` | NOT NULL | ì„œë¹„ìŠ¤ ì£¼ì†Œ |
| `special_requests` | `TEXT` | | íŠ¹ë³„ ìš”ì²­ì‚¬í•­ |
| `total_price` | `DECIMAL(10, 2)` | | ìµœì¢… ê²°ì œ ê¸ˆì•¡ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

### `booking_services` (ì˜ˆì•½-ì„œë¹„ìŠ¤ ë‚´ì—­)
- í•œ ì˜ˆì•½ì— ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ í¬í•¨ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ì¤‘ê°„ í…Œì´ë¸”ì…ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `booking_service_id` | `INT` | PK, AUTO_INCREMENT | ì‹ë³„ì |
| `booking_id` | `INT` | NOT NULL, FK -> `bookings`.`booking_id` | ì˜ˆì•½ ì°¸ì¡° |
| `service_id` | `INT` | NOT NULL, FK -> `services`.`service_id` | ì„œë¹„ìŠ¤ ì°¸ì¡° |
| `quantity` | `INT` | NOT NULL, DEFAULT 1 | ìˆ˜ëŸ‰ |
| `price_at_booking` | `DECIMAL(10, 2)` | NOT NULL | ì˜ˆì•½ ì‹œì ì˜ ë‹¨ê°€ |

---

## 4. ê²°ì œ ë° ì •ì‚° ê´€ë¦¬
**[ì‹œë‚˜ë¦¬ì˜¤ ì—°ê´€ì„±]**
- **ê³ ê°**: ì˜ˆì•½ ì‹œ ë“±ë¡ëœ ê²°ì œìˆ˜ë‹¨ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì„ ê²°ì œí•©ë‹ˆë‹¤.
- **ì„œë¹„ìŠ¤ ê¸°ì‚¬**: ì™„ë£Œí•œ ì‘ì—…ì— ëŒ€í•œ ìˆ˜ìµê³¼ ì •ì‚° ë‚´ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤.
- **ê´€ë¦¬ì**: ì „ì²´ ë§¤ì¶œê³¼ ìˆ˜ìˆ˜ë£Œë¥¼ ê´€ë¦¬í•˜ê³ , ê¸°ì‚¬ë³„ ì •ì‚°ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

### `payments` (ê²°ì œ)
- ì˜ˆì•½ì— ëŒ€í•œ ê²°ì œ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `payment_id` | `INT` | PK, AUTO_INCREMENT | ê²°ì œ ì‹ë³„ì |
| `booking_id` | `INT` | NOT NULL, FK -> `bookings`.`booking_id` | ì˜ˆì•½ ì°¸ì¡° |
| `payment_method` | `VARCHAR(50)` | | ê²°ì œ ìˆ˜ë‹¨ (e.g., "ì‹ ìš©ì¹´ë“œ") |
| `amount` | `DECIMAL(10, 2)` | NOT NULL | ê²°ì œ ê¸ˆì•¡ |
| `status` | `ENUM('pending', 'completed', 'failed', 'refunded')` | DEFAULT 'pending' | ê²°ì œ ìƒíƒœ |
| `transaction_id` | `VARCHAR(255)` | | ì™¸ë¶€ ê²°ì œì‚¬ ê±°ë˜ ID |
| `paid_at` | `TIMESTAMP` | | ê²°ì œ ì™„ë£Œ ì¼ì‹œ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |

### `settlements` (ì •ì‚°)
- ì„œë¹„ìŠ¤ ê¸°ì‚¬ì— ëŒ€í•œ ì •ì‚° ë‚´ì—­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `settlement_id` | `INT` | PK, AUTO_INCREMENT | ì •ì‚° ì‹ë³„ì |
| `technician_id` | `INT` | NOT NULL, FK -> `technicians`.`technician_id` | ê¸°ì‚¬ ì°¸ì¡° |
| `settlement_period` | `VARCHAR(50)` | NOT NULL | ì •ì‚° ê¸°ê°„ (e.g., "2024-05") |
| `total_amount` | `DECIMAL(10, 2)` | NOT NULL | ì´ ì„œë¹„ìŠ¤ ê¸ˆì•¡ |
| `commission_fee` | `DECIMAL(10, 2)` | NOT NULL | í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ |
| `final_amount` | `DECIMAL(10, 2)` | NOT NULL | ìµœì¢… ì •ì‚°ì•¡ |
| `status` | `ENUM('pending', 'completed')` | DEFAULT 'pending' | ì •ì‚° ìƒíƒœ |
| `completed_at` | `TIMESTAMP` | | ì •ì‚° ì™„ë£Œ ì¼ì‹œ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |

---

## 5. ì„œë¹„ìŠ¤ ê¸°ë¡ ë° ë¦¬ë·° ê´€ë¦¬
**[ì‹œë‚˜ë¦¬ì˜¤ ì—°ê´€ì„±]**
- **ê³ ê°**: ì™„ë£Œëœ ì„œë¹„ìŠ¤ì— ëŒ€í•œ í›„ê¸°ë¥¼ ì‘ì„±í•˜ê³ , ë‹¤ë¥¸ ê³ ê°ì˜ í›„ê¸°ë¥¼ ì¡°íšŒí•˜ì—¬ ê¸°ì‚¬ ì„ íƒì— ì°¸ê³ í•©ë‹ˆë‹¤.
- **ì„œë¹„ìŠ¤ ê¸°ì‚¬**: ì„œë¹„ìŠ¤ ì™„ë£Œ í›„, ì‘ì—… ì „/í›„ ì‚¬ì§„ì„ í¬í•¨í•œ ì‘ì—… ë³´ê³ ì„œë¥¼ ì‘ì„±í•˜ì—¬ ê³ ê° ì‹ ë¢°ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.
- **ê´€ë¦¬ì**: ì‘ì„±ëœ í›„ê¸°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , ë¶€ì ì ˆí•œ ì½˜í…ì¸ ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

### `service_reports` (ì‘ì—… ë³´ê³ ì„œ)
- ì„œë¹„ìŠ¤ ì™„ë£Œ í›„ ê¸°ì‚¬ê°€ ì‘ì„±í•˜ëŠ” ë³´ê³ ì„œì…ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `report_id` | `INT` | PK, AUTO_INCREMENT | ë³´ê³ ì„œ ì‹ë³„ì |
| `booking_id` | `INT` | NOT NULL, FK -> `bookings`.`booking_id` | ì˜ˆì•½ ì°¸ì¡° |
| `summary` | `TEXT` | | ì‘ì—… ìš”ì•½ |
| `before_image_urls` | `JSON` | | ì‘ì—… ì „ ì‚¬ì§„ URL ëª©ë¡ |
| `after_image_urls` | `JSON` | | ì‘ì—… í›„ ì‚¬ì§„ URL ëª©ë¡ |
| `recommendations` | `TEXT` | | ì¶”ê°€ ê¶Œì¥ ì‚¬í•­ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |

### `reviews` (ë¦¬ë·°)
- ê³ ê°ì´ ì„œë¹„ìŠ¤ì— ëŒ€í•´ ì‘ì„±í•˜ëŠ” ë¦¬ë·° ë° í‰ì ì…ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
| --- | --- | --- | --- |
| `review_id` | `INT` | PK, AUTO_INCREMENT | ë¦¬ë·° ì‹ë³„ì |
| `booking_id` | `INT` | NOT NULL, FK -> `bookings`.`booking_id` | ì˜ˆì•½ ì°¸ì¡° |
| `customer_id` | `INT` | NOT NULL, FK -> `customers`.`customer_id` | ê³ ê° ì°¸ì¡° |
| `technician_id` | `INT` | NOT NULL, FK -> `technicians`.`technician_id` | ê¸°ì‚¬ ì°¸ì¡° |
| `rating` | `INT` | NOT NULL, CHECK (`rating` BETWEEN 1 AND 5) | í‰ì  (1~5) |
| `comment` | `TEXT` | | ë¦¬ë·° ë‚´ìš© |
| `image_urls` | `JSON` | | ì²¨ë¶€ ì‚¬ì§„ URL ëª©ë¡ |
| `is_public` | `BOOLEAN` | DEFAULT TRUE | ê³µê°œ ì—¬ë¶€ |
| `admin_response` | `TEXT` | | ê´€ë¦¬ì ë‹µë³€ |
| `created_at` | `TIMESTAMP` | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| `updated_at` | `TIMESTAMP` | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

---

## 6. ë§ˆì¼€íŒ… ë° ë¶„ì„

### marketing_campaigns (ë§ˆì¼€íŒ… ìº í˜ì¸)
| ì»¬ëŸ¼ëª…           | íƒ€ì…                            | ì œì•½ì¡°ê±´                                              | ì„¤ëª…                |
|------------------|---------------------------------|-------------------------------------------------------|---------------------|
| campaign_id      | INT                             | PK, AUTO_INCREMENT                                    | ìº í˜ì¸ ì‹ë³„ì       |
| campaign_name    | VARCHAR(200)                    | NOT NULL                                              | ìº í˜ì¸ ì´ë¦„         |
| campaign_type    | ENUM('sms','email','kakao','push')| NOT NULL                                           | ìº í˜ì¸ ìœ í˜•         |
| target_segment   | JSON                            |                                                       | íƒ€ê²Ÿ ì¡°ê±´ (JSON)    |
| message_template | TEXT                            | NOT NULL                                              | ë©”ì‹œì§€ í…œí”Œë¦¿       |
| discount_code    | VARCHAR(50)                     |                                                       | í• ì¸ ì½”ë“œ           |
| discount_rate    | DECIMAL(5,2)                    |                                                       | í• ì¸ìœ¨ (%)          |
| start_date       | DATE                            |                                                       | ì‹œì‘ì¼              |
| end_date         | DATE                            |                                                       | ì¢…ë£Œì¼              |
| status           | ENUM('draft','active','paused','completed')| DEFAULT 'draft'                             | ìƒíƒœ                |
| sent_count       | INT                             | DEFAULT 0                                            | ë°œì†¡ íšŸìˆ˜           |
| success_count    | INT                             | DEFAULT 0                                            | ì„±ê³µ íšŸìˆ˜           |
| conversion_count | INT                             | DEFAULT 0                                            | ì „í™˜ íšŸìˆ˜           |
| created_at       | TIMESTAMP                       | DEFAULT CURRENT_TIMESTAMP                            | ìƒì„±ì¼ì‹œ           |
| updated_at       | TIMESTAMP                       | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP| ìˆ˜ì •ì¼ì‹œ           |

### customer_segments (ê³ ê° ì„¸ê·¸ë¨¼íŠ¸)
| ì»¬ëŸ¼ëª…              | íƒ€ì…                            | ì œì•½ì¡°ê±´                                      | ì„¤ëª…              |
|---------------------|---------------------------------|-----------------------------------------------|-------------------|
| segment_id          | INT                             | PK, AUTO_INCREMENT                            | ì„¸ê·¸ë¨¼íŠ¸ ì‹ë³„ì  |
| customer_id         | INT                             | NOT NULL, FK -> customers.customer_id         | ê³ ê° ì°¸ì¡°        |
| segment_type        | ENUM('new','regular','vip','inactive','lost')|                                          | ì„¸ê·¸ë¨¼íŠ¸ ìœ í˜•    |
| last_service_date   | DATE                            |                                              | ë§ˆì§€ë§‰ ì„œë¹„ìŠ¤ ì¼ì|
| total_bookings      | INT                             | DEFAULT 0                                    | ì´ ì˜ˆì•½ íšŸìˆ˜     |
| total_spent         | DECIMAL(10,2)                   | DEFAULT 0                                    | ì´ ì§€ì¶œ ê¸ˆì•¡     |
| avg_rating          | DECIMAL(3,2)                    |                                              | í‰ê·  í‰ì         |
| preferred_service_time| VARCHAR(20)                  |                                              | ì„ í˜¸ ì„œë¹„ìŠ¤ ì‹œê°„|
| marketing_responsiveness| ENUM('high','medium','low') |                                          | ë§ˆì¼€íŒ… ë°˜ì‘ë„    |
| updated_at          | TIMESTAMP                       | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP| ìˆ˜ì •ì¼ì‹œ    |

### notifications (ì•Œë¦¼ ê´€ë¦¬)
| ì»¬ëŸ¼ëª…             | íƒ€ì…                            | ì œì•½ì¡°ê±´                                      | ì„¤ëª…              |
|--------------------|---------------------------------|-----------------------------------------------|-------------------|
| notification_id    | INT                             | PK, AUTO_INCREMENT                            | ì•Œë¦¼ ì‹ë³„ì     |
| customer_id        | INT                             | FK -> customers.customer_id                   | ê³ ê° ì°¸ì¡°       |
| notification_type  | ENUM('booking_reminder','service_complete','marketing','maintenance_due')| | ì•Œë¦¼ ìœ í˜•  |
| message            | TEXT                            | NOT NULL                                     | ë©”ì‹œì§€          |
| send_method        | ENUM('sms','email','kakao','push')|                                           | ì „ì†¡ ìˆ˜ë‹¨       |
| scheduled_time     | TIMESTAMP                       |                                              | ì˜ˆì•½ ë°œì†¡ ì‹œê°  |
| sent_time          | TIMESTAMP                       | NULL                                        | ë°œì†¡ ì™„ë£Œ ì‹œê°  |
| status             | ENUM('pending','sent','failed')| DEFAULT 'pending'                            | ìƒíƒœ           |
| created_at         | TIMESTAMP                       | DEFAULT CURRENT_TIMESTAMP                    | ìƒì„±ì¼ì‹œ       |

---
## 7. ì‹œìŠ¤í…œ ì„¤ì •

### system_settings (ì‹œìŠ¤í…œ ì„¤ì •)
| ì»¬ëŸ¼ëª…           | íƒ€ì…                              | ì œì•½ì¡°ê±´                                        | ì„¤ëª…             |
|------------------|-----------------------------------|-------------------------------------------------|------------------|
| setting_id       | INT                               | PK, AUTO_INCREMENT                              | ì„¤ì • ì‹ë³„ì      |
| setting_key      | VARCHAR(100)                      | UNIQUE, NOT NULL                                 | ì„¤ì • í‚¤          |
| setting_value    | TEXT                              |                                                 | ì„¤ì • ê°’          |
| setting_type     | ENUM('string','number','boolean','json')| DEFAULT 'string'                         | ê°’ ìœ í˜•          |
| description      | TEXT                              |                                                 | ì„¤ëª…             |
| is_public        | BOOLEAN                           | DEFAULT FALSE                                   | ê³µê°œ ì—¬ë¶€        |
| updated_by       | INT                               | FK -> users.user_id                             | ìˆ˜ì •ì          |
| updated_at       | TIMESTAMP                         | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP| ìˆ˜ì •ì¼ì‹œ    |

### audit_logs (ê°ì‚¬ ë¡œê·¸)
| ì»¬ëŸ¼ëª…         | íƒ€ì…                        | ì œì•½ì¡°ê±´                                            | ì„¤ëª…              |
|----------------|-----------------------------|-----------------------------------------------------|-------------------|
| log_id         | INT                         | PK, AUTO_INCREMENT                                  | ë¡œê·¸ ì‹ë³„ì      |
| user_id        | INT                         | FK -> users.user_id                                 | ì‚¬ìš©ì ì°¸ì¡°      |
| action         | VARCHAR(100)                | NOT NULL                                            | ì‘ì—…              |
| table_name     | VARCHAR(50)                 |                                                     | í…Œì´ë¸”ëª…          |
| record_id      | INT                         |                                                     | ë ˆì½”ë“œ ì‹ë³„ì     |
| old_values     | JSON                        |                                                     | ì´ì „ ê°’           |
| new_values     | JSON                        |                                                     | ìƒˆë¡œìš´ ê°’         |
| ip_address     | VARCHAR(45)                 |                                                     | IP ì£¼ì†Œ           |
| user_agent     | TEXT                        |                                                     | ì‚¬ìš©ì ì—ì´ì „íŠ¸   |
| created_at     | TIMESTAMP                   | DEFAULT CURRENT_TIMESTAMP                            | ìƒì„±ì¼ì‹œ         |

---
## ğŸ“Š ì£¼ìš” ê¸°ëŠ¥ë³„ í™œìš© ë°©ì•ˆ

### ğŸ¯ íƒ€ê²Ÿ ë§ˆì¼€íŒ… í™œìš©
```sql
-- ì˜ˆì‹œ: 6ê°œì›” ì´ìƒ ì„œë¹„ìŠ¤ ë°›ì§€ ì•Šì€ VIP ê³ ê° ì¡°íšŒ
SELECT c.*, cs.last_service_date 
FROM customers c 
JOIN customer_segments cs ON c.customer_id = cs.customer_id 
WHERE cs.segment_type = 'vip' 
  AND cs.last_service_date < DATE_SUB(NOW(), INTERVAL 6 MONTH);
```

### ğŸ“ˆ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë°ì´í„°
```sql
-- ì›”ë³„ ë§¤ì¶œ í†µê³„
SELECT 
  DATE_FORMAT(booking_date, '%Y-%m') AS month,
  COUNT(*) AS total_bookings,
  SUM(total_price) AS total_revenue
FROM bookings 
WHERE status = 'completed' 
GROUP BY month 
ORDER BY month DESC;
```
