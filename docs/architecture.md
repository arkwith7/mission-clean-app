# mission-clean-app 기술 아키텍처

이 문서는 '에어컨 청소 중개 플랫폼'의 초기 구축을 위한 기술 아키텍처를 정의합니다. 제시된 AWS 라이트세일 환경(2GB RAM, 2vCPU, 60GB SSD)에 최적화된 경량 모놀리식(Monolithic) 구조를 제안합니다.

---

## 1. 제안 아키텍처: 경량 모놀리식 (Monolithic)

초기 단계에서는 마이크로서비스 아키텍처(MSA)보다 **단일 서버에 모든 기능을 통합한 모놀리식 아키텍처**가 관리 및 배포가 용이하고, 제한된 리소스를 효율적으로 사용할 수 있어 유리합니다.

### 1.1. 핵심 기술 스택 (Technology Stack)

| 구분 | 기술 | 선택 이유 |
| --- | --- | --- |
| **백엔드** | Node.js + Express.js | 비동기 I/O 기반으로 실시간성이 중요한 예약 서비스에 유리하며, 프론트엔드와 언어(JavaScript)를 통일할 수 있습니다. |
| **프론트엔드** | React (또는 Vue.js) | 역할별(고객, 기사, 관리자) 동적 UI를 구축하기 위한 SPA(Single Page Application) 구현에 최적화되어 있습니다. |
| **데이터베이스** | PostgreSQL | 설계된 관계형 데이터를 안정적으로 관리하기에 적합하며, `sequelize` ORM과 호환성이 좋습니다. |
| **웹 서버** | Nginx | 가볍고 성능이 뛰어난 리버스 프록시 서버입니다. API 요청은 백엔드 앱으로 전달하고, 정적 파일(이미지, CSS 등)은 직접 처리하여 백엔드의 부담을 줄입니다. |

### 1.2. 배포 아키텍처 다이어그램

하나의 AWS 라이트세일 인스턴스에 모든 기술 스택을 배포하는 구조입니다.

![기술 아키텍처 다이어그램](./mermaid-diagram-2025-06-27-215647.svg)

### 1.3. 아키텍처 설명

1.  **사용자 요청**: 사용자가 웹 브라우저를 통해 서비스 도메인으로 접속합니다.
2.  **Nginx (웹 서버)**: 모든 요청의 관문(Entrypoint) 역할을 합니다.
    -   `/api/` 경로의 요청은 백엔드 **Node.js 서버**로 전달(Proxy)합니다.
    -   그 외의 요청은 프론트엔드 **React 애플리케이션**의 정적 빌드 파일(`index.html` 등)을 사용자에게 직접 전달합니다.
3.  **Node.js (백엔드)**: API 요청을 받아 비즈니스 로직을 처리합니다. 필요시 PostgreSQL 데이터베이스와 통신하여 데이터를 CRUD하고, 그 결과를 Nginx를 통해 사용자에게 반환합니다.
    -   **PM2**: Node.js 앱이 예기치 않게 종료될 경우 자동으로 재시작하고, 멀티 코어 CPU를 효율적으로 사용할 수 있도록 클러스터 모드를 지원하는 프로세스 매니저입니다.
4.  **PostgreSQL (데이터베이스)**: 모든 데이터를 영구적으로 저장하는 공간입니다. 애플리케이션 서버(Node.js)만이 데이터베이스에 직접 접근할 수 있습니다.

---

## 2. 향후 확장성 계획

서비스가 성장함에 따라 다음과 같은 단계로 시스템을 확장할 수 있습니다.

*   **1단계: 데이터베이스 분리**
    -   **트리거**: DB 부하 증가 또는 데이터 안정성 강화 필요시
    -   **액션**: 데이터베이스를 별도의 라이트세일 인스턴스나 AWS의 관리형 서비스인 **RDS(Relational Database Service)**로 이전하여 서버와 DB의 부하를 분리합니다.

*   **2단계: 애플리케이션 서버 확장 (Scale-Out)**
    -   **트리거**: API 요청 증가로 인한 서버 부하 증가
    -   **액션**: **라이트세일 로드밸런서**를 도입하고, 여러 개의 라이트세일 인스턴스에 Node.js 서버를 복제하여 수평적으로 확장합니다.

*   **3단계: CDN 도입**
    -   **트리거**: 이미지/동영상 등 정적 콘텐츠의 로딩 속도 개선 필요시
    -   **액션**: **AWS CloudFront (CDN)**를 연동하여 정적 파일을 지리적으로 가까운 사용자에게 더 빠르게 전송하고, 메인 서버의 트래픽 부담을 줄입니다.

이 아키텍처는 초기 비용과 관리 복잡성을 최소화하면서, 미래의 성장에 유연하게 대응할 수 있는 구조입니다. 